<%= form_with model: @instance_bridge, url: upload_photos_bridge_instance_bridge_path(@bridge, @instance_bridge), method: :patch, data: { turbo_frame: "avatars-list" }, html: { multipart: true } do |f| %>
    <div class="w-full mb-5">
      <!-- Custom file upload design -->
      <label for="dropzone-file" class="flex flex-col items-center justify-center py-9 w-full border border-gray-300 border-dashed rounded-2xl cursor-pointer bg-gray-50 ">
        <div class="mb-3 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="40" height="20" viewBox="0 0 40 40" fill="none">
            <g id="Upload 02">
              <path id="icon" d="M16.296 25.3935L19.9997 21.6667L23.7034 25.3935M19.9997 35V21.759M10.7404 27.3611H9.855C6.253 27.3611 3.33301 24.4411 3.33301 20.8391C3.33301 17.2371 6.253 14.3171 9.855 14.3171V14.3171C10.344 14.3171 10.736 13.9195 10.7816 13.4326C11.2243 8.70174 15.1824 5 19.9997 5C25.1134 5 29.2589 9.1714 29.2589 14.3171H30.1444C33.7463 14.3171 36.6663 17.2371 36.6663 20.8391C36.6663 24.4411 33.7463 27.3611 30.1444 27.3611H29.2589" stroke="#4F46E5" stroke-width="1.6" stroke-linecap="round" />
            </g>
          </svg>
        </div>
        <h2 class="text-center text-gray-400 text-xs font-normal leading-4 mb-1">PNG, JPG or SVG, smaller than 5MB</h2>
        <h4 class="text-center text-gray-900 text-sm font-medium leading-snug">Drag and Drop your file here or</h4>
        <!-- Hidden file input -->
        <%= f.file_field :avatars, multiple: true, class: "hidden", direct_upload: true, id: "dropzone-file" %>
      </label>
    </div>

    <div class="mt-5 flex items-center justify-end gap-x-4">
  <%= f.submit "Upload Photos", class: "rounded-md bg-indigo-600 px-3 py-1.5 text-xs font-semibold text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-600" %>
</div>

    
  <% end %>


<br>
<div id="avatars-list">
<%if @instance_bridge.avatars.blank?%>
<center><p class="mt-1 text-sm leading-6 text-gray-600">There are no photos for this instance bridge.</p></center>
<%else%>
<center><h1 class="text-base font-semibold leading-7 text-gray-900"><%=@instance_bridge.name%></h1></center><br>

  <div class="mx-auto max-w-4xl px-4  sm:px-6  lg:max-w-7xl lg:px-8">

    <div class="grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 xl:gap-x-8">
      <% @instance_bridge.avatars.each do |avatar_url| %>
        <div id="avatar-<%= avatar_url.id %>" class="group relative" data-controller="zoom">
          <%= image_tag avatar_url, alt: "Uploaded Image",
              class: "aspect-square w-full rounded-lg bg-gray-200 object-cover transition-transform duration-300 xl:aspect-7/8",
              data: { zoom_target: "image", action: "click->zoom#toggle" } %>

          <div class="mt-1 flex items-center justify-between">

            <%= form_with(
                  url: destroy_avatar_bridge_instance_bridge_path(@bridge, @instance_bridge, avatar_url: avatar_url),
                  method: :delete,
                  data: { turbo_stream: true }
                ) do |form| %>
              <button type="submit" class="bg-indigo-700 text-white rounded-full p-1 hover:bg-indigo-500" onclick="return confirm('Are you sure you want to delete this avatar?')">
                <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"/>
                </svg>
              </button>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
    </div>
    </div>
    </div>
<%end%>


